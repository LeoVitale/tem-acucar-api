{
  "$schema": "http://interagent.github.io/interagent-hyper-schema",
  "type": [
    "object"
  ],
  "definitions": {
    "authentication": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Authentication",
      "description": "An authentication represents an individual signed in to use the Tem Açúcar app",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of authentication",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user_id": {
          "description": "unique identifier of authentication user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "provider": {
          "description": "provider of authentication",
          "readOnly": true,
          "format": "ipv4",
          "enum": [
            "email",
            "facebook"
          ],
          "type": [
            "string"
          ]
        },
        "ip": {
          "description": "ip address of authentication",
          "readOnly": true,
          "format": "ipv4",
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/authentication/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when authentication was created",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when authentication was updated",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "facebook_token": {
          "description": "Facebook token of authentication user",
          "readOnly": true,
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Sign in with a new authentication.",
          "href": "/authentications",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "password": {
                "$ref": "#/definitions/user/definitions/password"
              },
              "facebook_token": {
                "$ref": "#/definitions/authentication/definitions/facebook_token"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "Sign out from an existing authentication.",
          "href": "/authentications",
          "method": "DELETE",
          "rel": "destroy",
          "schema": {
            "strictProperties": true,
            "properties": null,
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Delete"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/authentication/definitions/id"
        },
        "user_id": {
          "$ref": "#/definitions/authentication/definitions/user_id"
        },
        "provider": {
          "$ref": "#/definitions/authentication/definitions/provider"
        },
        "ip": {
          "$ref": "#/definitions/authentication/definitions/ip"
        },
        "created_at": {
          "$ref": "#/definitions/authentication/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/authentication/definitions/updated_at"
        }
      }
    },
    "demand": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Demand",
      "description": "A demand represents something a user asks to the neighborhood",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of the demand",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user": {
          "description": "user of the demand",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/user"
          }
        },
        "state": {
          "description": "state of the demand",
          "enum": [
            "sending",
            "active",
            "canceled",
            "completed"
          ],
          "type": [
            "string"
          ]
        },
        "name": {
          "description": "name of the demand",
          "type": [
            "string"
          ]
        },
        "description": {
          "description": "description of the demand",
          "type": [
            "string"
          ]
        },
        "latitude": {
          "description": "latitude of the demand",
          "type": [
            "number"
          ]
        },
        "longitude": {
          "description": "longitude of the demand",
          "type": [
            "number"
          ]
        },
        "radius": {
          "description": "radius of the demand in kilometers",
          "type": [
            "number"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/demand/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when demand was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when demand was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new demand.",
          "href": "/demands",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "name": {
                "$ref": "#/definitions/demand/definitions/name"
              },
              "description": {
                "$ref": "#/definitions/demand/definitions/description"
              },
              "radius": {
                "$ref": "#/definitions/demand/definitions/radius"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/demand"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "List existing demands.",
          "href": "/demands",
          "method": "GET",
          "rel": "instances",
          "title": "List"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/demand/definitions/id"
        },
        "user": {
          "$ref": "#/definitions/demand/definitions/user"
        },
        "state": {
          "$ref": "#/definitions/demand/definitions/state"
        },
        "name": {
          "$ref": "#/definitions/demand/definitions/name"
        },
        "latitude": {
          "$ref": "#/definitions/demand/definitions/latitude"
        },
        "longitude": {
          "$ref": "#/definitions/demand/definitions/longitude"
        },
        "radius": {
          "$ref": "#/definitions/demand/definitions/radius"
        },
        "description": {
          "$ref": "#/definitions/demand/definitions/description"
        },
        "created_at": {
          "$ref": "#/definitions/demand/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/demand/definitions/updated_at"
        }
      },
      "required": [
        "id",
        "user",
        "name",
        "description",
        "created_at",
        "updated_at"
      ],
      "additionalProperties": false
    },
    "error": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Error",
      "description": "An error represents a failed action in Tem Açúcar API",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of error",
          "readOnly": true,
          "pattern": "^\\w+$",
          "type": [
            "string"
          ]
        },
        "message": {
          "description": "message of error",
          "readOnly": true,
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/error/definitions/id"
            }
          ]
        }
      },
      "properties": {
        "id": {
          "$ref": "#/definitions/error/definitions/id"
        },
        "message": {
          "$ref": "#/definitions/error/definitions/message"
        }
      }
    },
    "me": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Me",
      "description": "Me represents the individual signed in to use the Tem Açúcar app",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "links": [
        {
          "description": "Info for signed in user.",
          "href": "/me",
          "method": "GET",
          "rel": "self",
          "title": "Info",
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          }
        }
      ]
    },
    "password": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Password",
      "description": "A password represents an users's attempt to reset her password on the Tem Açúcar app",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "token": {
          "description": "Reset password token for user",
          "readOnly": true,
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Request token to create a new password to be sent to user's email.",
          "href": "/password",
          "method": "POST",
          "rel": "create",
          "schema": {
            "strictProperties": true,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/password"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Request token"
        },
        {
          "description": "Reset user password through token set to user's email.",
          "href": "/password",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "strictProperties": true,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "password": {
                "$ref": "#/definitions/user/definitions/password"
              },
              "token": {
                "$ref": "#/definitions/password/definitions/token"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Reset password"
        }
      ],
      "properties": null
    },
    "user": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - User",
      "description": "An user represents an individual signed up to use the Tem Açúcar app",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "old_id": {
          "description": "old Tem Açúcar website id",
          "readOnly": true,
          "type": [
            "number",
            "null"
          ]
        },
        "email": {
          "description": "unique email address of user",
          "format": "email",
          "type": [
            "string"
          ]
        },
        "secondary_email": {
          "description": "secondary email address of user",
          "format": "email",
          "type": [
            "string",
            "null"
          ]
        },
        "facebook_uid": {
          "description": "unique Facebook identifier of user",
          "readOnly": true,
          "type": [
            "string",
            "null"
          ]
        },
        "first_name": {
          "description": "first name of user",
          "type": [
            "string"
          ]
        },
        "last_name": {
          "description": "last name of user",
          "type": [
            "string"
          ]
        },
        "password": {
          "description": "unencrypted password of user, used only on user creation",
          "type": [
            "string"
          ],
          "minLength": 8
        },
        "latitude": {
          "description": "latitude of user",
          "type": [
            "number",
            "null"
          ]
        },
        "longitude": {
          "description": "longitude of user",
          "type": [
            "number",
            "null"
          ]
        },
        "address_name": {
          "description": "address name of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_thoroughfare": {
          "description": "address thoroughfare of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_sub_thoroughfare": {
          "description": "address sub thoroughfare of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_sub_locality": {
          "description": "address sub locality of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_locality": {
          "description": "address locality of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_sub_administrative_area": {
          "description": "address sub administrative area of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_administrative_area": {
          "description": "address administrative area of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_country": {
          "description": "address country of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_postal_code": {
          "description": "address postal code of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_complement": {
          "description": "address complement of user",
          "type": [
            "string",
            "null"
          ]
        },
        "accepted_terms": {
          "description": "wheter or not user has accepted Tem Açúcar terms of use",
          "type": [
            "boolean"
          ]
        },
        "reviewed_email": {
          "description": "wheter or not user has reviewed her primary email address",
          "type": [
            "boolean"
          ]
        },
        "reviewed_location": {
          "description": "wheter or not user has reviewed her address",
          "type": [
            "boolean"
          ]
        },
        "admin": {
          "description": "wheter or not user can administrate the whole Tem Açúcar app",
          "type": [
            "boolean"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/user/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when user was created",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when user was updated",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new user.",
          "href": "/users",
          "method": "POST",
          "rel": "create",
          "schema": {
            "strictProperties": true,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "first_name": {
                "$ref": "#/definitions/user/definitions/first_name"
              },
              "last_name": {
                "$ref": "#/definitions/user/definitions/last_name"
              },
              "password": {
                "$ref": "#/definitions/user/definitions/password"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "Info for existing user.",
          "href": "/users/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "title": "Info"
        },
        {
          "description": "List existing users.",
          "href": "/users",
          "method": "GET",
          "rel": "instances",
          "title": "List"
        },
        {
          "description": "Update an existing user.",
          "href": "/users/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "secondary_email": {
                "$ref": "#/definitions/user/definitions/secondary_email"
              },
              "first_name": {
                "$ref": "#/definitions/user/definitions/first_name"
              },
              "last_name": {
                "$ref": "#/definitions/user/definitions/last_name"
              },
              "latitude": {
                "$ref": "#/definitions/user/definitions/latitude"
              },
              "longitude": {
                "$ref": "#/definitions/user/definitions/longitude"
              },
              "address_name": {
                "$ref": "#/definitions/user/definitions/address_name"
              },
              "address_thoroughfare": {
                "$ref": "#/definitions/user/definitions/address_thoroughfare"
              },
              "address_sub_thoroughfare": {
                "$ref": "#/definitions/user/definitions/address_sub_thoroughfare"
              },
              "address_sub_locality": {
                "$ref": "#/definitions/user/definitions/address_sub_locality"
              },
              "address_locality": {
                "$ref": "#/definitions/user/definitions/address_locality"
              },
              "address_sub_administrative_area": {
                "$ref": "#/definitions/user/definitions/address_sub_administrative_area"
              },
              "address_administrative_area": {
                "$ref": "#/definitions/user/definitions/address_administrative_area"
              },
              "address_country": {
                "$ref": "#/definitions/user/definitions/address_country"
              },
              "address_postal_code": {
                "$ref": "#/definitions/user/definitions/address_postal_code"
              },
              "address_complement": {
                "$ref": "#/definitions/user/definitions/address_complement"
              },
              "accepted_terms": {
                "$ref": "#/definitions/user/definitions/accepted_terms"
              },
              "reviewed_email": {
                "$ref": "#/definitions/user/definitions/reviewed_email"
              },
              "reviewed_location": {
                "$ref": "#/definitions/user/definitions/reviewed_location"
              }
            },
            "type": [
              "object"
            ]
          },
          "title": "Update"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/user/definitions/id"
        },
        "email": {
          "$ref": "#/definitions/user/definitions/email"
        },
        "secondary_email": {
          "$ref": "#/definitions/user/definitions/secondary_email"
        },
        "facebook_uid": {
          "$ref": "#/definitions/user/definitions/facebook_uid"
        },
        "first_name": {
          "$ref": "#/definitions/user/definitions/first_name"
        },
        "last_name": {
          "$ref": "#/definitions/user/definitions/last_name"
        },
        "latitude": {
          "$ref": "#/definitions/user/definitions/latitude"
        },
        "longitude": {
          "$ref": "#/definitions/user/definitions/longitude"
        },
        "address_name": {
          "$ref": "#/definitions/user/definitions/address_name"
        },
        "address_thoroughfare": {
          "$ref": "#/definitions/user/definitions/address_thoroughfare"
        },
        "address_sub_thoroughfare": {
          "$ref": "#/definitions/user/definitions/address_sub_thoroughfare"
        },
        "address_sub_locality": {
          "$ref": "#/definitions/user/definitions/address_sub_locality"
        },
        "address_locality": {
          "$ref": "#/definitions/user/definitions/address_locality"
        },
        "address_sub_administrative_area": {
          "$ref": "#/definitions/user/definitions/address_sub_administrative_area"
        },
        "address_administrative_area": {
          "$ref": "#/definitions/user/definitions/address_administrative_area"
        },
        "address_country": {
          "$ref": "#/definitions/user/definitions/address_country"
        },
        "address_postal_code": {
          "$ref": "#/definitions/user/definitions/address_postal_code"
        },
        "address_complement": {
          "$ref": "#/definitions/user/definitions/address_complement"
        },
        "accepted_terms": {
          "$ref": "#/definitions/user/definitions/accepted_terms"
        },
        "reviewed_email": {
          "$ref": "#/definitions/user/definitions/reviewed_email"
        },
        "reviewed_location": {
          "$ref": "#/definitions/user/definitions/reviewed_location"
        },
        "created_at": {
          "$ref": "#/definitions/user/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/user/definitions/updated_at"
        }
      },
      "required": [
        "id",
        "first_name",
        "last_name",
        "created_at",
        "updated_at"
      ],
      "additionalProperties": false
    },
    "version": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Version",
      "description": "An user represents a version of the Tem Açúcar app for a platform",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of version",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "number": {
          "description": "unique number of version for its platform",
          "readOnly": true,
          "type": [
            "string"
          ]
        },
        "platform": {
          "description": "platform of version",
          "readOnly": true,
          "enum": [
            "ios",
            "android"
          ],
          "type": [
            "string"
          ]
        },
        "expiry": {
          "description": "when version expires",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/version/definitions/id"
            },
            {
              "$ref": "#/definitions/version/definitions/number"
            }
          ]
        },
        "created_at": {
          "description": "when version was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when version was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Info for existing version.",
          "href": "/versions/{(%23%2Fdefinitions%2Fversion%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "title": "Info"
        },
        {
          "description": "List existing versions.",
          "href": "/versions",
          "method": "GET",
          "rel": "instances",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "platform": {
                "$ref": "#/definitions/version/definitions/platform"
              }
            },
            "type": [
              "object"
            ]
          },
          "title": "List"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/version/definitions/id"
        },
        "number": {
          "$ref": "#/definitions/version/definitions/number"
        },
        "platform": {
          "$ref": "#/definitions/version/definitions/platform"
        },
        "expiry": {
          "$ref": "#/definitions/version/definitions/expiry"
        },
        "created_at": {
          "$ref": "#/definitions/version/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/version/definitions/updated_at"
        }
      }
    }
  },
  "properties": {
    "authentication": {
      "$ref": "#/definitions/authentication"
    },
    "demand": {
      "$ref": "#/definitions/demand"
    },
    "error": {
      "$ref": "#/definitions/error"
    },
    "me": {
      "$ref": "#/definitions/me"
    },
    "password": {
      "$ref": "#/definitions/password"
    },
    "user": {
      "$ref": "#/definitions/user"
    },
    "version": {
      "$ref": "#/definitions/version"
    }
  },
  "description": "The API for Tem Açúcar, an app to borrow things from neighbors.",
  "id": "tem-acucar-api",
  "links": [
    {
      "href": "https://api.temacucar.com",
      "rel": "self"
    }
  ],
  "title": "Tem Açúcar API"
}
